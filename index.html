<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>–°—Ç—Ä–æ–π–ü–æ–∏—Å–∫ ‚Äî –ø–æ–∏—Å–∫ —Ä–∞–∑–Ω–æ—Ä–∞–±–æ—á–∏—Ö –∏ —Å—Ç—Ä–æ–∏—Ç–µ–ª–µ–π</title>
  <meta name="description" content="–ü–æ–∏—Å–∫ —Ä–∞–∑–Ω–æ—Ä–∞–±–æ—á–∏—Ö –∏ —Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω—ã—Ö —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤. –ö–∞—Ç–∞–ª–æ–≥, —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç–Ω–∏–∫–∞, –∑–∞—Ä–ø–ª–∞—Ç—ã –ø–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–º —Ä–∞–±–æ—Ç–∞–º, –∫–æ–Ω—Ç–∞–∫—Ç—ã –∏ –∫–∞—Ä—Ç–∞." />
  <style>
    :root{
      --bg:#ffffff;
      --card:#ffffff;
      --text:#0f172a;
      --muted:#475569;
      --border:#e5e7eb;
      --soft:#f8fafc;
      --accent:#2563eb;
      --accent2:#16a34a;
      --danger:#dc2626;
      --shadow: 0 10px 25px rgba(2,6,23,.08);
      --shadow2: 0 6px 16px rgba(2,6,23,.06);
      --radius: 18px;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Noto Sans", "Liberation Sans", sans-serif;
      color:var(--text);
      background: radial-gradient(900px 420px at 12% -10%, rgba(37,99,235,.10), transparent 60%),
                  radial-gradient(900px 420px at 88% -10%, rgba(22,163,74,.10), transparent 60%),
                  var(--bg);
      line-height:1.35;
    }
    a{color:inherit}
    .container{max-width:1180px;margin:0 auto;padding:0 18px}

    header{
      position:sticky; top:0; z-index:50;
      border-bottom:1px solid rgba(229,231,235,.75);
      background: rgba(255,255,255,.72);
      backdrop-filter: blur(10px);
    }
    .topbar{
      display:flex;align-items:center;justify-content:space-between;
      padding:12px 0; gap:10px; flex-wrap:wrap;
    }
    .brand{display:flex;align-items:center;gap:12px;text-decoration:none}
    .logo{
      width:40px;height:40px;border-radius:14px;
      background: linear-gradient(135deg, rgba(37,99,235,1), rgba(22,163,74,1));
      box-shadow: 0 16px 34px rgba(37,99,235,.18);
      position:relative; overflow:hidden;
    }
    .logo::after{
      content:""; position:absolute; inset:-20%;
      background: radial-gradient(circle at 30% 20%, rgba(255,255,255,.55), transparent 55%);
      transform: rotate(12deg);
    }
    .brand h1{font-size:14px;line-height:1;margin:0}
    .brand span{display:block;font-size:12px;color:var(--muted);font-weight:600;margin-top:2px}

    nav{display:flex;gap:6px;align-items:center;flex-wrap:wrap}
    nav button{
      border:0;background:transparent;cursor:pointer;
      font-size:13px;color:var(--muted);
      padding:8px 10px;border-radius:12px;
      font-weight:650;
    }
    nav button:hover{background:var(--soft); color:var(--text)}
    nav button.active{background: rgba(37,99,235,.10); color:var(--text)}

    .pill{
      display:inline-flex;align-items:center;gap:10px;
      padding:8px 12px;border:1px solid var(--border);border-radius:999px;
      background: rgba(255,255,255,.9);
      box-shadow: 0 1px 0 rgba(2,6,23,.03);
      color:var(--muted);
      font-size:13px;
      backdrop-filter: blur(8px);
    }
    .dot{width:8px;height:8px;border-radius:99px;background:var(--accent)}

    .btn{
      appearance:none;border:1px solid var(--border);background:var(--card);
      color:var(--text); padding:11px 14px;border-radius:14px;
      display:inline-flex;align-items:center;justify-content:center;gap:10px;
      cursor:pointer; font-weight:650;
      box-shadow: 0 1px 0 rgba(2,6,23,.03);
      transition: transform .12s ease, box-shadow .12s ease, border-color .12s ease, background .12s ease;
      user-select:none;
      text-decoration:none;
    }
    .btn:hover{transform: translateY(-1px); box-shadow: var(--shadow2); border-color:#d1d5db;}
    .btn:active{transform: translateY(0px); box-shadow: 0 2px 8px rgba(2,6,23,.08);}
    .btn.primary{background:var(--accent); border-color:var(--accent); color:white;}
    .btn.primary:hover{box-shadow: 0 14px 30px rgba(37,99,235,.18);}
    .btn.good{background:var(--accent2); border-color:var(--accent2); color:white;}
    .btn.danger{background:#fff; border-color:#fecaca; color:var(--danger);}
    .btn.small{padding:9px 11px;border-radius:12px;font-size:13px;}
    .btn.icon{width:44px;height:44px;padding:0;border-radius:14px;}
    .btn[disabled]{opacity:.55;cursor:not-allowed;transform:none;box-shadow:none}

    .input, select, textarea{
      width:100%;
      border:1px solid var(--border);
      border-radius:14px;
      padding:12px 12px;
      background:#fff;
      font:inherit;
      outline:none;
      transition: border-color .12s ease, box-shadow .12s ease;
    }
    .input:focus, select:focus, textarea:focus{
      border-color: rgba(37,99,235,.55);
      box-shadow: 0 0 0 4px rgba(37,99,235,.12);
    }
    textarea{min-height: 96px; resize: vertical}

    section{padding:18px 0 22px}
    .panel{
      border:1px solid var(--border);
      border-radius: var(--radius);
      background: rgba(255,255,255,.92);
      box-shadow: var(--shadow2);
      padding:14px;
    }

    .hero{padding:26px 0 10px}
    .hero-grid{
      display:grid; gap:18px;
      grid-template-columns: 1.15fr .85fr;
      align-items:stretch;
    }
    @media (max-width: 920px){ .hero-grid{grid-template-columns: 1fr;} }

    .hero-card{
      border:1px solid var(--border);
      border-radius: var(--radius);
      background: rgba(255,255,255,.84);
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    .hero-card .inner{padding:18px}
    .hero-title{font-size:34px;line-height:1.05;margin:6px 0 10px}
    .hero-sub{color:var(--muted);font-weight:550;margin:0 0 14px}
    .hero-actions{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px}

    .mini{
      border:1px solid var(--border); border-radius: var(--radius);
      background: rgba(255,255,255,.84);
      box-shadow: var(--shadow2);
      padding:14px;
    }
    .mini h3{margin:0 0 8px;font-size:14px}
    .mini p{margin:0;color:var(--muted);font-size:13px}
    .mini .row{display:flex;gap:10px;align-items:center;justify-content:space-between;margin-top:10px;flex-wrap:wrap}
    .mini .badge{
      display:inline-flex;gap:8px;align-items:center;
      font-size:12px; color:var(--muted);
      border:1px solid var(--border); border-radius:999px;
      padding:6px 10px;background:var(--soft);
    }

    .section-head{display:flex;align-items:flex-end;justify-content:space-between;gap:12px;margin:6px 0 12px;flex-wrap:wrap}
    .section-head h2{margin:0;font-size:18px}
    .section-head p{margin:0;color:var(--muted);font-size:13px}

    .chips{display:flex;flex-wrap:wrap;gap:8px;margin-top:12px}
    .chip{
      border:1px solid var(--border);
      background: #fff;
      padding:9px 12px;
      border-radius:999px;
      cursor:pointer;
      font-weight:650;
      font-size:13px;
      color:var(--muted);
      user-select:none;
      transition: background .12s ease, border-color .12s ease, transform .12s ease;
    }
    .chip:hover{transform: translateY(-1px); background:var(--soft); border-color:#d1d5db; color:var(--text)}
    .chip.active{background: rgba(37,99,235,.10); border-color: rgba(37,99,235,.25); color: var(--text)}

    .searchbar{
      display:grid;grid-template-columns: 1.2fr .8fr .8fr auto;
      gap:10px; margin-top:12px;
    }
    @media (max-width: 920px){
      .searchbar{grid-template-columns: 1fr 1fr; }
      .searchbar .wide{grid-column: 1 / -1;}
    }

    .grid{
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap:12px;
    }
    @media (max-width: 980px){.grid{grid-template-columns: repeat(2,1fr)}}
    @media (max-width: 620px){.grid{grid-template-columns: 1fr}}

    .card{
      border:1px solid var(--border);
      border-radius: var(--radius);
      background: rgba(255,255,255,.92);
      box-shadow: var(--shadow2);
      overflow:hidden;
      display:flex;
      flex-direction:column;
      min-height: 280px;
    }
    .card .img{
      height:150px;
      background: #f1f5f9;
      background-size:cover;
      background-position:center;
    }
    .card .body{padding:14px;display:flex;flex-direction:column;gap:10px;flex:1}
    .row{display:flex;align-items:center;justify-content:space-between;gap:10px;flex-wrap:wrap}
    .name{font-weight:800;font-size:15px;margin:0}
    .meta{color:var(--muted);font-size:13px;margin:0}
    .tagline{font-size:13px;color:var(--muted);margin:0}
    .kpis{display:flex;gap:8px;flex-wrap:wrap}
    .kpi{
      font-size:12px;
      color:var(--muted);
      border:1px solid var(--border);
      border-radius:999px;
      padding:6px 10px;
      background: var(--soft);
      display:inline-flex;gap:6px;align-items:center;
    }
    .stars{letter-spacing:1px;color:#f59e0b;font-size:13px}
    .card .actions{display:flex;gap:10px;flex-wrap:wrap;margin-top:auto}

    .table-wrap{overflow:auto;border:1px solid var(--border);border-radius: var(--radius);background:#fff}
    table{width:100%;border-collapse:collapse;min-width:720px}
    th,td{padding:12px;border-bottom:1px solid var(--border);text-align:left;font-size:13px}
    th{background:var(--soft);font-size:12px;color:var(--muted);text-transform:uppercase;letter-spacing:.06em}
    tr:hover td{background: rgba(2,6,23,.02)}
    .money{font-weight:800}

    footer{
      border-top:1px solid rgba(229,231,235,.9);
      padding:18px 0 26px;
      background: rgba(255,255,255,.7);
      backdrop-filter: blur(10px);
    }
    .footer-grid{
      display:grid; gap:12px;
      grid-template-columns: 1fr 1fr 1fr;
    }
    @media (max-width: 980px){.footer-grid{grid-template-columns:1fr}}
    .muted{color:var(--muted)}
    .contact-links{display:flex;gap:10px;flex-wrap:wrap;margin-top:10px}

    /* Modal */
    .modal-backdrop{
      position:fixed; inset:0;
      background: rgba(2,6,23,.55);
      display:none;
      align-items:center; justify-content:center;
      padding:16px;
      z-index:100;
    }
    .modal{
      width:min(820px, 100%);
      border-radius: 22px;
      background: #fff;
      border:1px solid rgba(229,231,235,.9);
      box-shadow: 0 30px 80px rgba(2,6,23,.25);
      overflow:hidden;
      transform: translateY(8px);
      opacity:0;
      transition: transform .18s ease, opacity .18s ease;
    }
    .modal.show{transform: translateY(0); opacity:1;}
    .modal .top{
      display:flex; align-items:center; justify-content:space-between;
      padding:14px; border-bottom:1px solid var(--border);
      background: linear-gradient(180deg, rgba(248,250,252,.95), rgba(255,255,255,.92));
    }
    .modal .content{display:grid;grid-template-columns: .95fr 1.05fr; gap:0}
    @media (max-width: 880px){.modal .content{grid-template-columns:1fr}}
    .modal .photo{min-height:240px;background:#f1f5f9;background-size:cover;background-position:center}
    .modal .info{padding:14px;display:flex;flex-direction:column;gap:10px}
    .modal .info h3{margin:0;font-size:18px}
    .modal .info .sub{margin:0;color:var(--muted);font-size:13px}
    .modal .info .bullets{margin:0;padding-left:18px;color:var(--muted);font-size:13px}
    .modal .bottom{
      display:flex;gap:10px;flex-wrap:wrap;
      padding:14px;border-top:1px solid var(--border);
      background:#fff;
    }

    /* Toast */
    .toast{
      position: fixed;
      right: 16px;
      bottom: 16px;
      z-index: 120;
      max-width: 420px;
      display:flex;
      flex-direction:column;
      gap:10px;
    }
    .toast .t{
      border:1px solid var(--border);
      background:#fff;
      border-radius: 16px;
      padding:12px 12px;
      box-shadow: var(--shadow);
      display:flex;
      align-items:flex-start;
      gap:10px;
    }
    .toast .t strong{display:block}
    .toast .t p{margin:2px 0 0;color:var(--muted);font-size:13px}
    .toast .bar{
      width:10px;border-radius:999px;background:var(--accent);
      box-shadow: 0 12px 30px rgba(37,99,235,.22);
    }

    .hide{display:none !important;}
    .hr{height:1px;background:var(--border);border:0;margin:10px 0}

    /* Map */
    .map-wrap{
      border:1px solid var(--border);
      border-radius: var(--radius);
      overflow:hidden;
      background:#fff;
      box-shadow: var(--shadow2);
      height: 380px;
    }
    .map-wrap iframe{width:100%;height:100%;border:0}

    /* Small helper */
    .note{font-size:13px;color:var(--muted);margin:0}
  </style>
</head>

<body>
<header>
  <div class="container">
    <div class="topbar">
      <a class="brand" href="#" id="brandGoHome">
        <div class="logo" aria-hidden="true"></div>
        <div>
          <h1>–°—Ç—Ä–æ–π–ü–æ–∏—Å–∫</h1>
          <span>–†–∞–∑–Ω–æ—Ä–∞–±–æ—á–∏–µ –∏ –º–∞—Å—Ç–µ—Ä–∞ ‚Ä¢ –∫–∞—Ç–∞–ª–æ–≥ + —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</span>
        </div>
      </a>

      <nav>
        <button class="active" data-page="home">–ì–ª–∞–≤–Ω–∞—è</button>
        <button data-page="catalog">–ö–∞—Ç–∞–ª–æ–≥</button>
        <button data-page="register">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç–Ω–∏–∫–∞</button>
        <button data-page="contacts">–ö–æ–Ω—Ç–∞–∫—Ç—ã</button>
      </nav>
    </div>
  </div>
</header>

<main class="container">

  <!-- ===== PAGE: HOME ===== -->
  <div id="page-home">
    <div class="hero">
      <div class="hero-grid">
        <div class="hero-card">
          <div class="inner">
            <div class="pill"><span class="dot"></span> –î–æ—Å—Ç—É–ø–Ω–æ: <b id="countWorkers">0</b> —Ä–∞–±–æ—Ç–Ω–∏–∫–æ–≤</div>
            <h2 class="hero-title">–ù–∞–π–¥–∏ —Ä–∞–±–æ—á–∏—Ö –¥–ª—è —Å—Ç—Ä–æ–π–∫–∏ –±—ã—Å—Ç—Ä–æ</h2>
            <p class="hero-sub">–ö–∞—Ç–∞–ª–æ–≥ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏, –∑–∞—Ä–ø–ª–∞—Ç—ã –ø–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–º —Ä–∞–±–æ—Ç–∞–º, –ø—Ä–æ—Ñ–∏–ª–∏ –∏ –∫–Ω–æ–ø–∫–∏ —Å–≤—è–∑–∏. –†–∞–±–æ—Ç–Ω–∏–∫–∏ –º–æ–≥—É—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è —Å–∞–º–∏.</p>

            <div class="hero-actions">
              <button class="btn primary" data-page="catalog">–û—Ç–∫—Ä—ã—Ç—å –∫–∞—Ç–∞–ª–æ–≥</button>
              <button class="btn good" data-page="register">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è —Ä–∞–±–æ—Ç–Ω–∏–∫—É</button>
              <button class="btn" data-page="contacts">–ö–æ–Ω—Ç–∞–∫—Ç—ã + –∫–∞—Ä—Ç–∞</button>
            </div>

            <div style="margin-top:12px" class="kpis">
              <span class="kpi">‚úÖ –ü—Ä–æ—Ñ–∏–ª–∏</span>
              <span class="kpi">‚≠ê –†–µ–π—Ç–∏–Ω–≥–∏</span>
              <span class="kpi">üí¨ Telegram/WhatsApp</span>
              <span class="kpi">üìç –ö–∞—Ä—Ç–∞</span>
            </div>
          </div>
        </div>

        <div style="display:flex;flex-direction:column;gap:12px">
          <div class="mini">
            <h3>–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç</h3>
            <p>1) –û—Ç–∫—Ä–æ–π –∫–∞—Ç–∞–ª–æ–≥ ‚Üí 2) –í—ã–±–µ—Ä–∏ –ø—Ä–æ—Ñ–µ—Å—Å–∏—é ‚Üí 3) –ü—Ä–æ—Ñ–∏–ª—å ‚Üí 4) –°–≤—è–∂–∏—Å—å –∏ –Ω–∞–Ω–∏–º–∞–π.</p>
            <div class="row">
              <span class="badge">‚ö° –ë—ã—Å—Ç—Ä–æ</span>
              <span class="badge">üõ†Ô∏è –ü–æ –ø—Ä–æ—Ñ–µ—Å—Å–∏—è–º</span>
              <span class="badge">üßæ –ó–∞—Ä–ø–ª–∞—Ç—ã</span>
            </div>
          </div>

          <div class="mini">
            <h3>–í–∞–∂–Ω–æ</h3>
            <p>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ –¥–µ–º–æ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –±—Ä–∞—É–∑–µ—Ä–µ (localStorage). –î–ª—è –Ω–∞—Å—Ç–æ—è—â–µ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ –Ω—É–∂–µ–Ω —Å–µ—Ä–≤–µ—Ä –∏ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö.</p>
            <div class="row">
              <button class="btn small" id="resetAll">–°–±—Ä–æ—Å–∏—Ç—å –¥–µ–º–æ-–¥–∞–Ω–Ω—ã–µ</button>
              <span class="pill"><span class="dot"></span> –î–µ–º–æ</span>
            </div>
          </div>

          <div class="mini">
            <h3>–§–æ—Ç–æ (2 –≤–∞—Ä–∏–∞–Ω—Ç–∞)</h3>
            <p>–í –ø—Ä–æ—Ñ–∏–ª—è—Ö —É–∂–µ —Å—Ç–æ—è—Ç —Ñ–æ—Ç–æ —Å—Ç—Ä–æ–∏—Ç–µ–ª–µ–π. –ü—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –º–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –∏–∑ 2 –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤.</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- ===== PAGE: CATALOG ===== -->
  <div id="page-catalog" class="hide">
    <section>
      <div class="section-head">
        <div>
          <h2>–ö–∞—Ç–∞–ª–æ–≥ —Ä–∞–±–æ—Ç–Ω–∏–∫–æ–≤</h2>
          <p>–§–∏–ª—å—Ç—Ä—ã, —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞, –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–æ—Ñ–∏–ª—è, –∫–Ω–æ–ø–∫–∏ —Å–≤—è–∑–∏.</p>
        </div>
        <div class="kpis">
          <span class="kpi">üë∑‚Äç‚ôÇÔ∏è –í—ã–±—Ä–∞–Ω–æ: <b id="pickedCount">0</b></span>
          <span class="kpi">‚≠ê –°—Ä–µ–¥–Ω–∏–π —Ä–µ–π—Ç–∏–Ω–≥: <b id="avgRating">0.0</b></span>
          <span class="kpi">‚úÖ –í—Å–µ–≥–æ —Ä–∞–±–æ—Ç: <b id="sumJobs">0</b></span>
        </div>
      </div>

      <div class="panel">
        <div class="searchbar">
          <input id="q" class="input wide" placeholder="–ü–æ–∏—Å–∫: –∏–º—è, –ø—Ä–æ—Ñ–µ—Å—Å–∏—è, –æ–ø—ã—Ç, –æ–ø–∏—Å–∞–Ω–∏–µ‚Ä¶" />
          <select id="profession"></select>
          <select id="sort">
            <option value="rating_desc">–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞: —Ä–µ–π—Ç–∏–Ω–≥ (–ª—É—á—à–∏–µ)</option>
            <option value="jobs_desc">–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞: –≤—ã–ø–æ–ª–Ω–µ–Ω–æ —Ä–∞–±–æ—Ç (–±–æ–ª—å—à–µ)</option>
            <option value="pay_asc">–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞: –∑–∞—Ä–ø–ª–∞—Ç–∞ –∑–∞ —Ä–∞–±–æ—Ç—É (–¥–µ—à–µ–≤–ª–µ)</option>
            <option value="pay_desc">–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞: –∑–∞—Ä–ø–ª–∞—Ç–∞ –∑–∞ —Ä–∞–±–æ—Ç—É (–¥–æ—Ä–æ–∂–µ)</option>
          </select>
          <button id="resetFilters" class="btn">–°–±—Ä–æ—Å</button>
        </div>

        <div class="chips" id="chips"></div>
      </div>

      <div style="height:12px"></div>

      <div class="grid" id="workersGrid"></div>
    </section>

    <section>
      <div class="section-head">
        <div>
          <h2>–ó–∞—Ä–ø–ª–∞—Ç—ã –∑–∞ –ø—Ä–æ–¥–µ–ª–∞–Ω–Ω—É—é —Ä–∞–±–æ—Ç—É</h2>
          <p>–ü–æ –≤–æ–∑—Ä–∞—Å—Ç–∞–Ω–∏—é –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö —Ä–∞–±–æ—Ç (–º–æ–∂–Ω–æ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫—É).</p>
        </div>
        <div class="row">
          <button class="btn small" id="toggleSalarySort">–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞: –ø–æ —Ä–∞–±–æ—Ç–∞–º ‚Üë</button>
          <button class="btn small danger" id="clearRegistered">–£–¥–∞–ª–∏—Ç—å –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö (–¥–µ–º–æ)</button>
        </div>
      </div>

      <div class="panel">
        <p class="note">–ò—Ç–æ–≥–æ–≤–∞—è –≤—ã–ø–ª–∞—Ç–∞ = (–∑–∞—Ä–ø–ª–∞—Ç–∞ –∑–∞ 1 —Ä–∞–±–æ—Ç—É) √ó (–≤—ã–ø–æ–ª–Ω–µ–Ω–æ —Ä–∞–±–æ—Ç).</p>
        <div class="table-wrap" style="margin-top:10px">
          <table>
            <thead>
              <tr>
                <th>–†–∞–±–æ—Ç–Ω–∏–∫</th>
                <th>–ü—Ä–æ—Ñ–µ—Å—Å–∏—è</th>
                <th>–ó–∞—Ä–ø–ª–∞—Ç–∞ –∑–∞ 1 —Ä–∞–±–æ—Ç—É</th>
                <th>–í—ã–ø–æ–ª–Ω–µ–Ω–æ —Ä–∞–±–æ—Ç</th>
                <th>–ò—Ç–æ–≥–æ–≤–∞—è –≤—ã–ø–ª–∞—Ç–∞</th>
                <th>–†–µ–π—Ç–∏–Ω–≥</th>
              </tr>
            </thead>
            <tbody id="salaryBody"></tbody>
          </table>
        </div>
      </div>
    </section>
  </div>

  <!-- ===== PAGE: REGISTER ===== -->
  <div id="page-register" class="hide">
    <section>
      <div class="section-head">
        <div>
          <h2>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç–Ω–∏–∫–∞</h2>
          <p>–ó–∞–ø–æ–ª–Ω–∏ –∞–Ω–∫–µ—Ç—É ‚Äî —Ä–∞–±–æ—Ç–Ω–∏–∫ –ø–æ—è–≤–∏—Ç—Å—è –≤ –∫–∞—Ç–∞–ª–æ–≥–µ –∏ —Ç–∞–±–ª–∏—Ü–µ –∑–∞—Ä–ø–ª–∞—Ç.</p>
        </div>
        <div class="pill"><span class="dot"></span> –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –±—Ä–∞—É–∑–µ—Ä–µ (–¥–µ–º–æ)</div>
      </div>

      <div class="panel">
        <form id="regForm">
          <div class="grid" style="grid-template-columns:repeat(3,1fr)">
            <div>
              <label class="note" for="rName">–ò–º—è –∏ —Ñ–∞–º–∏–ª–∏—è</label>
              <input id="rName" class="input" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ê—Ä—Ç—ë–º –ü." required />
            </div>
            <div>
              <label class="note" for="rCity">–ì–æ—Ä–æ–¥</label>
              <input id="rCity" class="input" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ú–æ—Å–∫–≤–∞" required />
            </div>
            <div>
              <label class="note" for="rProf">–ü—Ä–æ—Ñ–µ—Å—Å–∏—è</label>
              <select id="rProf" required></select>
            </div>
          </div>

          <div class="grid" style="grid-template-columns:repeat(3,1fr); margin-top:10px">
            <div>
              <label class="note" for="rExp">–û–ø—ã—Ç</label>
              <select id="rExp" required>
                <option>–ë–µ–∑ –æ–ø—ã—Ç–∞</option>
                <option>1 –≥–æ–¥</option>
                <option>2 –≥–æ–¥–∞</option>
                <option>3 –≥–æ–¥–∞</option>
                <option>4 –≥–æ–¥–∞</option>
                <option>5 –ª–µ—Ç</option>
                <option>6+ –ª–µ—Ç</option>
              </select>
            </div>
            <div>
              <label class="note" for="rPay">–ó–∞—Ä–ø–ª–∞—Ç–∞ –∑–∞ 1 —Ä–∞–±–æ—Ç—É (‚ÇΩ)</label>
              <input id="rPay" class="input" type="number" min="500" step="100" value="3000" required />
            </div>
            <div>
              <label class="note" for="rJobs">–°–∫–æ–ª—å–∫–æ —Ä–∞–±–æ—Ç —É–∂–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ</label>
              <input id="rJobs" class="input" type="number" min="0" step="1" value="0" required />
            </div>
          </div>

          <div class="grid" style="grid-template-columns:repeat(3,1fr); margin-top:10px">
            <div>
              <label class="note" for="rPhone">–¢–µ–ª–µ—Ñ–æ–Ω (–¥–ª—è –∫–Ω–æ–ø–∫–∏ ‚Äú–ü–æ–∑–≤–æ–Ω–∏—Ç—å‚Äù)</label>
              <input id="rPhone" class="input" placeholder="+7 999 000-00-00" required />
            </div>
            <div>
              <label class="note" for="rTg">Telegram (—Å—Å—ã–ª–∫–∞)</label>
              <input id="rTg" class="input" placeholder="https://t.me/username" required />
            </div>
            <div>
              <label class="note" for="rWa">WhatsApp (—Å—Å—ã–ª–∫–∞ wa.me)</label>
              <input id="rWa" class="input" placeholder="https://wa.me/79990000000" required />
            </div>
          </div>

          <div style="margin-top:10px">
            <label class="note" for="rAbout">–ö–æ—Ä–æ—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ</label>
            <textarea id="rAbout" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ø–æ–¥—Å–æ–±–Ω—ã–µ —Ä–∞–±–æ—Ç—ã, –¥–µ–º–æ–Ω—Ç–∞–∂, —É–±–æ—Ä–∫–∞, –ø–µ—Ä–µ–Ω–æ—Å –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤‚Ä¶" required></textarea>
          </div>

          <div style="margin-top:10px">
            <p class="note" style="margin:0 0 10px"><b>–í—ã–±–µ—Ä–∏ —Ñ–æ—Ç–æ —Ä–∞–±–æ—Ç–Ω–∏–∫–∞ (2 –≤–∞—Ä–∏–∞–Ω—Ç–∞):</b></p>
            <div class="row" style="justify-content:flex-start; gap:12px">
              <label class="pill" style="cursor:pointer">
                <input type="radio" name="photoPick" value="p1" checked />
                –§–æ—Ç–æ 1
              </label>
              <label class="pill" style="cursor:pointer">
                <input type="radio" name="photoPick" value="p2" />
                –§–æ—Ç–æ 2
              </label>
              <span class="note">–§–æ—Ç–æ –±—É–¥—É—Ç –≤ –ø—Ä–æ—Ñ–∏–ª–µ –∏ –∫–∞—Ä—Ç–æ—á–∫–µ.</span>
            </div>
          </div>

          <div class="row" style="margin-top:12px">
            <div class="kpis">
              <span class="kpi">üîí –≠—Ç–æ –¥–µ–º–æ</span>
              <span class="kpi">üßæ –î–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü—É</span>
              <span class="kpi">üìû –ö–Ω–æ–ø–∫–∏ —Å–≤—è–∑–∏ —Ä–∞–±–æ—Ç–∞—é—Ç</span>
            </div>
            <div class="row">
              <button class="btn" type="button" id="fillRegDemo">–ó–∞–ø–æ–ª–Ω–∏—Ç—å –ø—Ä–∏–º–µ—Ä</button>
              <button class="btn primary" type="submit">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å</button>
            </div>
          </div>
        </form>
      </div>
    </section>
  </div>

  <!-- ===== PAGE: CONTACTS ===== -->
  <div id="page-contacts" class="hide">
    <section>
      <div class="section-head">
        <div>
          <h2>–ö–æ–Ω—Ç–∞–∫—Ç—ã –∏ –∫–∞—Ä—Ç–∞</h2>
          <p>–ü–æ—á—Ç–∞, —Ç–µ–ª–µ—Ñ–æ–Ω, Telegram, WhatsApp + –Ø–Ω–¥–µ–∫—Å –∫–∞—Ä—Ç–∞.</p>
        </div>
      </div>

      <div class="panel">
        <div class="row">
          <div>
            <p style="margin:0"><b>–ü–æ—á—Ç–∞:</b> <span class="muted" id="cEmail">stroypoisk@example.com</span></p>
            <p style="margin:6px 0 0"><b>–¢–µ–ª–µ—Ñ–æ–Ω:</b> <span class="muted" id="cPhone">+7 (999) 000-00-00</span></p>
            <p style="margin:6px 0 0"><b>Telegram:</b> <span class="muted" id="cTg">@stroypoisk</span></p>
            <p style="margin:6px 0 0"><b>WhatsApp:</b> <span class="muted" id="cWa">+7 (999) 000-00-00</span></p>
          </div>

          <div class="contact-links">
            <a class="btn" id="mailLink" href="mailto:stroypoisk@example.com">‚úâÔ∏è Email</a>
            <a class="btn" id="telLink" href="tel:+79990000000">üìû –ü–æ–∑–≤–æ–Ω–∏—Ç—å</a>
            <a class="btn" id="tgLink" href="https://t.me/stroypoisk" target="_blank" rel="noreferrer">üì® Telegram</a>
            <a class="btn" id="waLink" href="https://wa.me/79990000000" target="_blank" rel="noreferrer">üí¨ WhatsApp</a>
          </div>
        </div>

        <hr class="hr"/>

        <p class="note" style="margin:0 0 10px">
          <b>–Ø–Ω–¥–µ–∫—Å –∫–∞—Ä—Ç–∞:</b> —Å–µ–π—á–∞—Å —Å—Ç–æ–∏—Ç –ø—Ä–∏–º–µ—Ä (—Ü–µ–Ω—Ç—Ä –ú–æ—Å–∫–≤—ã). –•–æ—á–µ—à—å ‚Äî –∑–∞–º–µ–Ω–∏—à—å –∞–¥—Ä–µ—Å –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–µ –Ø–Ω–¥–µ–∫—Å –∫–∞—Ä—Ç –∏ –≤—Å—Ç–∞–≤–∏—à—å –Ω–æ–≤—ã–π iframe.
        </p>

        <div class="map-wrap" aria-label="–Ø–Ω–¥–µ–∫—Å –∫–∞—Ä—Ç–∞">
          <!-- –ü—Ä–∏–º–µ—Ä iframe –æ—Ç –Ø–Ω–¥–µ–∫—Å.–ö–∞—Ä—Ç (–∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä). –ú–æ–∂–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞ —Å–≤–æ–π. -->
          <iframe
            src="https://yandex.ru/map-widget/v1/?ll=37.617635%2C55.755814&z=12"
            allowfullscreen="true"
            loading="lazy"
            referrerpolicy="no-referrer-when-downgrade"
            title="–Ø–Ω–¥–µ–∫—Å –ö–∞—Ä—Ç–∞">
          </iframe>
        </div>
      </div>
    </section>
  </div>

</main>

<footer>
  <div class="container">
    <div class="footer-grid">
      <div>
        <p style="margin:0"><b>–°—Ç—Ä–æ–π–ü–æ–∏—Å–∫</b></p>
        <p class="muted" style="margin:8px 0 0;font-size:13px">–î–µ–º–æ-—Å–µ—Ä–≤–∏—Å –¥–ª—è –ø–æ–∏—Å–∫–∞ —Ä–∞–±–æ—Ç–Ω–∏–∫–æ–≤ –ø–æ —Å—Ç—Ä–æ–π–∫–µ.</p>
      </div>
      <div>
        <p style="margin:0"><b>–†–∞–∑–¥–µ–ª—ã</b></p>
        <p class="muted" style="margin:8px 0 0;font-size:13px">
          –ì–ª–∞–≤–Ω–∞—è ‚Ä¢ –ö–∞—Ç–∞–ª–æ–≥ ‚Ä¢ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è ‚Ä¢ –ö–æ–Ω—Ç–∞–∫—Ç—ã
        </p>
      </div>
      <div>
        <p style="margin:0"><b>–°–≤—è–∑—å</b></p>
        <p class="muted" style="margin:8px 0 0;font-size:13px">Email: stroypoisk@example.com</p>
        <p class="muted" style="margin:6px 0 0;font-size:13px">–¢–µ–ª: +7 (999) 000-00-00</p>
      </div>
    </div>
  </div>
</footer>

<!-- Modal -->
<div class="modal-backdrop" id="modalBackdrop" aria-hidden="true">
  <div class="modal" id="modal" role="dialog" aria-modal="true" aria-label="–ü—Ä–æ—Ñ–∏–ª—å —Ä–∞–±–æ—Ç–Ω–∏–∫–∞">
    <div class="top">
      <div class="pill"><span class="dot"></span> –ü—Ä–æ—Ñ–∏–ª—å —Ä–∞–±–æ—Ç–Ω–∏–∫–∞</div>
      <button class="btn icon" id="closeModal" aria-label="–ó–∞–∫—Ä—ã—Ç—å">‚úï</button>
    </div>
    <div class="content">
      <div class="photo" id="modalPhoto"></div>
      <div class="info">
        <h3 id="modalName">‚Äî</h3>
        <p class="sub" id="modalSub">‚Äî</p>
        <div class="kpis" id="modalKpis"></div>
        <p class="tagline" id="modalAbout">‚Äî</p>
        <ul class="bullets" id="modalBullets"></ul>
      </div>
    </div>
    <div class="bottom">
      <button class="btn primary" id="hireBtn">–ù–∞–Ω—è—Ç—å</button>
      <a class="btn" id="callBtn" href="#">üìû –ü–æ–∑–≤–æ–Ω–∏—Ç—å</a>
      <a class="btn" id="tgBtn" href="#" target="_blank" rel="noreferrer">üì® Telegram</a>
      <a class="btn" id="waBtn" href="#" target="_blank" rel="noreferrer">üí¨ WhatsApp</a>
      <button class="btn danger" id="reportBtn">–ü–æ–∂–∞–ª–æ–≤–∞—Ç—å—Å—è</button>
    </div>
  </div>
</div>

<div class="toast" id="toast"></div>

<script>
  // ========= –î–ï–ú–û-–î–ê–ù–ù–´–ï / –•–†–ê–ù–ï–ù–ò–ï =========
  const STORAGE_KEY = "stroypoisk_registered_workers_v1";

  const contacts = {
    email: "stroypoisk@example.com",
    phone: "+79990000000",
    tg: "https://t.me/stroypoisk",
    wa: "https://wa.me/79990000000"
  };

  // 2 —Ñ–æ—Ç–æ –Ω–∞ –≤—ã–±–æ—Ä (–∏ –µ—â—ë 2 —Ä–∞–±–æ—á–∏—Ö —Ñ–æ—Ç–æ –¥–ª—è –∫–∞—Ä—Ç–æ—á–µ–∫)
  const photos = {
    p1: "https://images.unsplash.com/photo-1646227655718-dd721b681d91?fm=jpg&ixlib=rb-4.1.0&q=60&w=1400",
    p2: "https://images.unsplash.com/photo-1646227655588-b44f246c04fb?fm=jpg&ixlib=rb-4.1.0&q=60&w=1400",
    w1: "https://images.unsplash.com/photo-1751054571128-30d45eccbe42?fm=jpg&ixlib=rb-4.1.0&q=60&w=1400",
    w2: "https://images.unsplash.com/photo-1694119533251-589712cacb54?fm=jpg&ixlib=rb-4.1.0&q=60&w=1400"
  };

  const baseWorkers = [
    {
      id: "w1",
      name: "–ê–ª–µ–∫—Å–µ–π –ó.",
      profession: "–†–∞–∑–Ω–æ—Ä–∞–±–æ—á–∏–π",
      city: "–í–∞—à –≥–æ—Ä–æ–¥",
      rating: 4.8,
      jobsDone: 18,
      payPerJob: 3200,
      exp: "3 –≥–æ–¥–∞",
      about: "–†–∞–∑–≥—Ä—É–∑–∫–∞, –¥–µ–º–æ–Ω—Ç–∞–∂, —É–±–æ—Ä–∫–∞, –ø–µ—Ä–µ–Ω–æ—Å –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤, –ø–æ–¥—Å–æ–±–Ω—ã–µ —Ä–∞–±–æ—Ç—ã.",
      bullets: ["–ü—Ä–∏–µ–∑–∂–∞—é –≤–æ–≤—Ä–µ–º—è", "–ï—Å—Ç—å –±–∞–∑–æ–≤—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç", "–†–∞–±–æ—Ç–∞—é –∞–∫–∫—É—Ä–∞—Ç–Ω–æ"],
      photo: photos.w1,
      phone: contacts.phone, tg: contacts.tg, wa: contacts.wa
    },
    {
      id: "w2",
      name: "–°–µ—Ä–≥–µ–π –ú.",
      profession: "–ü–ª–∏—Ç–æ—á–Ω–∏–∫",
      city: "–í–∞—à –≥–æ—Ä–æ–¥",
      rating: 4.9,
      jobsDone: 27,
      payPerJob: 5200,
      exp: "6 –ª–µ—Ç",
      about: "–ü–ª–∏—Ç–∫–∞, –∫–µ—Ä–∞–º–æ–≥—Ä–∞–Ω–∏—Ç, –∑–∞—Ç–∏—Ä–∫–∞, –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –æ—Å–Ω–æ–≤–∞–Ω–∏—è, —Ä–æ–≤–Ω—ã–µ —à–≤—ã.",
      bullets: ["–û–ø—ã—Ç –ø–æ —Å–∞–Ω—É–∑–ª–∞–º/–∫—É—Ö–Ω—è–º", "–ß–∏—Å—Ç–æ—Ç–∞ –ø–æ—Å–ª–µ —Ä–∞–±–æ—Ç", "–§–æ—Ç–æ-–æ—Ç—á—ë—Ç –ø–æ —ç—Ç–∞–ø–∞–º"],
      photo: photos.p1,
      phone: contacts.phone, tg: contacts.tg, wa: contacts.wa
    },
    {
      id: "w3",
      name: "–î–º–∏—Ç—Ä–∏–π –ö.",
      profession: "–ú–∞–ª—è—Ä",
      city: "–í–∞—à –≥–æ—Ä–æ–¥",
      rating: 4.6,
      jobsDone: 11,
      payPerJob: 2800,
      exp: "2 –≥–æ–¥–∞",
      about: "–®–ø–∞–∫–ª—ë–≤–∫–∞, –ø–æ–∫—Ä–∞—Å–∫–∞, –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏, —É–∫—Ä—ã—Ç–∏–µ –ø–ª—ë–Ω–∫–æ–π.",
      bullets: ["–ë–µ—Ä–µ–∂–Ω–æ –∫ –º–µ–±–µ–ª–∏", "–†–∞–±–æ—Ç–∞—é –±—ã—Å—Ç—Ä–æ", "–ü–æ–¥–±–æ—Ä –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤"],
      photo: photos.w2,
      phone: contacts.phone, tg: contacts.tg, wa: contacts.wa
    },
    {
      id: "w4",
      name: "–ò–≥–æ—Ä—å –ü.",
      profession: "–ö—Ä–æ–≤–µ–ª—å—â–∏–∫",
      city: "–í–∞—à –≥–æ—Ä–æ–¥",
      rating: 4.7,
      jobsDone: 14,
      payPerJob: 6100,
      exp: "5 –ª–µ—Ç",
      about: "–†–µ–º–æ–Ω—Ç –∫—Ä–æ–≤–ª–∏, –≥–∏–¥—Ä–æ–∏–∑–æ–ª—è—Ü–∏—è, —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ—Ç–µ—á–µ–∫.",
      bullets: ["–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –Ω–∞ –≤—ã—Å–æ—Ç–µ", "–û—Ü–µ–Ω–∫–∞ –ø–æ —Ñ–æ—Ç–æ", "–ì–∞—Ä–∞–Ω—Ç–∏—è –Ω–∞ —Ä–∞–±–æ—Ç—É"],
      photo: photos.p2,
      phone: contacts.phone, tg: contacts.tg, wa: contacts.wa
    },
    {
      id: "w5",
      name: "–ù–∏–∫–∏—Ç–∞ –°.",
      profession: "–≠–ª–µ–∫—Ç—Ä–∏–∫",
      city: "–í–∞—à –≥–æ—Ä–æ–¥",
      rating: 4.9,
      jobsDone: 31,
      payPerJob: 7000,
      exp: "7 –ª–µ—Ç",
      about: "–ü—Ä–æ–≤–æ–¥–∫–∞, –∞–≤—Ç–æ–º–∞—Ç—ã, —Ä–æ–∑–µ—Ç–∫–∏, —Å–≤–µ—Ç, –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞, –∞–∫–∫—É—Ä–∞—Ç–Ω—ã–π –º–æ–Ω—Ç–∞–∂.",
      bullets: ["–°–æ–±–ª—é–¥–∞—é –Ω–æ—Ä–º—ã", "–†–∞–±–æ—Ç–∞ –ø–æ —Å–º–µ—Ç–µ", "–ü—Ä–æ–∑—Ä–∞—á–Ω—ã–µ —Ü–µ–Ω—ã"],
      photo: photos.w1,
      phone: contacts.phone, tg: contacts.tg, wa: contacts.wa
    },
    {
      id: "w6",
      name: "–í–ª–∞–¥–∏–º–∏—Ä –†.",
      profession: "–°–∞–Ω—Ç–µ—Ö–Ω–∏–∫",
      city: "–í–∞—à –≥–æ—Ä–æ–¥",
      rating: 4.5,
      jobsDone: 9,
      payPerJob: 3500,
      exp: "3 –≥–æ–¥–∞",
      about: "–°–º–µ—Å–∏—Ç–µ–ª–∏, —Å–∏—Ñ–æ–Ω—ã, —É–Ω–∏—Ç–∞–∑—ã, —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ—Ç–µ—á–µ–∫, –º–µ–ª–∫–∏–π —Ä–µ–º–æ–Ω—Ç.",
      bullets: ["–ë—ã—Å—Ç—Ä—ã–π –≤—ã–µ–∑–¥", "–ë–µ–∑ –Ω–∞–∫—Ä—É—Ç–æ–∫", "–†–∞–±–æ—Ç–∞—é —á–∏—Å—Ç–æ"],
      photo: photos.w2,
      phone: contacts.phone, tg: contacts.tg, wa: contacts.wa
    }
  ];

  const professionList = ["–†–∞–∑–Ω–æ—Ä–∞–±–æ—á–∏–π","–ü–ª–∏—Ç–æ—á–Ω–∏–∫","–ú–∞–ª—è—Ä","–≠–ª–µ–∫—Ç—Ä–∏–∫","–°–∞–Ω—Ç–µ—Ö–Ω–∏–∫","–ö—Ä–æ–≤–µ–ª—å—â–∏–∫","–ü–ª–æ—Ç–Ω–∏–∫","–ú–æ–Ω—Ç–∞–∂–Ω–∏–∫","–®—Ç—É–∫–∞—Ç—É—Ä","–°–≤–∞—Ä—â–∏–∫"];

  // ========= –£–¢–ò–õ–ò–¢–´ =========
  const $ = (sel) => document.querySelector(sel);
  const $$ = (sel) => Array.from(document.querySelectorAll(sel));
  const fmtMoney = (n) => new Intl.NumberFormat("ru-RU").format(n) + " ‚ÇΩ";
  const clamp = (n,a,b) => Math.max(a, Math.min(b,n));
  const escapeHtml = (s) => String(s)
    .replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;")
    .replaceAll('"',"&quot;").replaceAll("'","&#039;");

  function stars(r){
    const full = Math.round(r);
    return "‚òÖ".repeat(clamp(full,1,5)) + "‚òÜ".repeat(5 - clamp(full,1,5));
  }

  function toast(title, msg){
    const root = $("#toast");
    const el = document.createElement("div");
    el.className = "t";
    el.innerHTML = `<div class="bar" aria-hidden="true"></div>
      <div><strong>${escapeHtml(title)}</strong><p>${escapeHtml(msg)}</p></div>`;
    root.appendChild(el);
    setTimeout(()=>{ el.style.opacity="0"; el.style.transform="translateY(4px)"; }, 2600);
    setTimeout(()=>{ el.remove(); }, 3100);
  }

  function loadRegistered(){
    try{
      const raw = localStorage.getItem(STORAGE_KEY);
      if(!raw) return [];
      const arr = JSON.parse(raw);
      return Array.isArray(arr) ? arr : [];
    } catch { return []; }
  }
  function saveRegistered(arr){
    localStorage.setItem(STORAGE_KEY, JSON.stringify(arr));
  }
  function clearRegistered(){
    localStorage.removeItem(STORAGE_KEY);
  }

  // ========= –°–û–°–¢–û–Ø–ù–ò–ï =========
  const state = {
    page: "home",
    q: "",
    profession: "all",
    sort: "rating_desc",
    picked: new Set(),
    salarySort: "jobs_asc"
  };

  function getAllWorkers(){
    const registered = loadRegistered();
    return [...baseWorkers, ...registered];
  }

  // ========= –ù–ê–í–ò–ì–ê–¶–ò–Ø (3 ‚Äú—Å—Ç—Ä–∞–Ω–∏—Ü—ã‚Äù) =========
  function showPage(page){
    state.page = page;
    ["home","catalog","register","contacts"].forEach(p=>{
      $("#page-" + p).classList.toggle("hide", p !== page);
    });
    $$("nav button[data-page]").forEach(b=>{
      b.classList.toggle("active", b.dataset.page === page);
    });
    if(page === "catalog"){
      renderCatalog(); // –æ–±–Ω–æ–≤–∏–º –Ω–∞ –≤—Ö–æ–¥–µ
    }
    if(page === "contacts"){
      renderContacts();
    }
    window.scrollTo({top:0, behavior:"smooth"});
  }

  $$("nav button[data-page]").forEach(b=>{
    b.addEventListener("click", ()=> showPage(b.dataset.page));
  });
  $$("[data-page]").forEach(el=>{
    if(el.tagName.toLowerCase() !== "button") return;
    if(el.closest("nav")) return;
    el.addEventListener("click", ()=> showPage(el.dataset.page));
  });
  $("#brandGoHome").addEventListener("click", (e)=>{ e.preventDefault(); showPage("home"); });

  // ========= –ò–ù–ò–¢ –§–ò–õ–¨–¢–†–û–í =========
  function initSelects(){
    const profSel = $("#profession");
    profSel.innerHTML = `<option value="all">–í—Å–µ –ø—Ä–æ—Ñ–µ—Å—Å–∏–∏</option>` + professionList.map(p=>`<option value="${escapeHtml(p)}">${escapeHtml(p)}</option>`).join("");

    const rProf = $("#rProf");
    rProf.innerHTML = professionList.map(p=>`<option value="${escapeHtml(p)}">${escapeHtml(p)}</option>`).join("");
  }

  function initChips(){
    const root = $("#chips");
    const list = ["all", ...professionList];
    root.innerHTML = list.map(p => `
      <button class="chip ${p==="all"?"active":""}" data-chip="${escapeHtml(p)}">
        ${p==="all" ? "–í—Å–µ" : "üõ†Ô∏è " + escapeHtml(p)}
      </button>`).join("");
    root.addEventListener("click", (e)=>{
      const b = e.target.closest(".chip");
      if(!b) return;
      $$(".chip").forEach(x=>x.classList.remove("active"));
      b.classList.add("active");
      state.profession = b.dataset.chip;
      $("#profession").value = state.profession;
      renderCatalog();
    });
  }

  // ========= –ö–ê–¢–ê–õ–û–ì =========
  function workerMatches(w){
    const q = state.q.trim().toLowerCase();
    const prof = state.profession;
    if(prof !== "all" && w.profession !== prof) return false;
    if(!q) return true;
    const hay = (w.name + " " + w.profession + " " + w.about + " " + w.exp + " " + w.city).toLowerCase();
    return hay.includes(q);
  }

  function sortWorkers(list){
    const s = state.sort;
    const arr = [...list];
    const by = {
      rating_desc: (a,b)=> b.rating - a.rating || b.jobsDone - a.jobsDone,
      jobs_desc: (a,b)=> b.jobsDone - a.jobsDone || b.rating - a.rating,
      pay_asc: (a,b)=> a.payPerJob - b.payPerJob || b.rating - a.rating,
      pay_desc: (a,b)=> b.payPerJob - a.payPerJob || b.rating - a.rating,
    }[s];
    return arr.sort(by);
  }

  function togglePick(id){
    if(state.picked.has(id)){
      state.picked.delete(id);
      toast("–£–±—Ä–∞–Ω–æ", "–†–∞–±–æ—Ç–Ω–∏–∫ —É–¥–∞–ª—ë–Ω –∏–∑ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö.");
    } else {
      state.picked.add(id);
      const w = getAllWorkers().find(x=>x.id===id);
      toast("–î–æ–±–∞–≤–ª–µ–Ω–æ", w ? `–í—ã –≤—ã–±—Ä–∞–ª–∏: ${w.name}` : "–í—ã –≤—ã–±—Ä–∞–ª–∏ —Ä–∞–±–æ—Ç–Ω–∏–∫–∞.");
    }
    renderCatalog();
  }

  function renderStats(visible){
    $("#countWorkers").textContent = String(getAllWorkers().length);
    $("#pickedCount").textContent = String(state.picked.size);

    const avg = visible.length ? (visible.reduce((s,w)=>s+w.rating,0)/visible.length) : 0;
    const sumJobs = visible.reduce((s,w)=>s+w.jobsDone,0);
    $("#avgRating").textContent = avg.toFixed(1);
    $("#sumJobs").textContent = String(sumJobs);
  }

  function renderWorkers(){
    const all = getAllWorkers();
    const visible = sortWorkers(all.filter(workerMatches));
    const root = $("#workersGrid");

    root.innerHTML = visible.map(w=>{
      const picked = state.picked.has(w.id);
      const totalPay = w.jobsDone * w.payPerJob;
      return `
        <article class="card">
          <div class="img" style="background-image:url('${escapeHtml(w.photo)}')" role="img" aria-label="–§–æ—Ç–æ —Ä–∞–±–æ—Ç–Ω–∏–∫–∞"></div>
          <div class="body">
            <div class="row">
              <div>
                <p class="name">${escapeHtml(w.name)}</p>
                <p class="meta">${escapeHtml(w.profession)} ‚Ä¢ ${escapeHtml(w.city)} ‚Ä¢ –æ–ø—ã—Ç ${escapeHtml(w.exp)}</p>
              </div>
              <div class="pill" title="–†–µ–π—Ç–∏–Ω–≥">${escapeHtml(stars(w.rating))} <b>${w.rating.toFixed(1)}</b></div>
            </div>

            <p class="tagline">${escapeHtml(w.about)}</p>

            <div class="kpis">
              <span class="kpi">‚úÖ —Ä–∞–±–æ—Ç: <b>${w.jobsDone}</b></span>
              <span class="kpi">üí∞ –∑–∞ —Ä–∞–±–æ—Ç—É: <b>${fmtMoney(w.payPerJob)}</b></span>
              <span class="kpi">üßæ –≤—Å–µ–≥–æ: <b>${fmtMoney(totalPay)}</b></span>
            </div>

            <div class="actions">
              <button class="btn small primary" data-open="${escapeHtml(w.id)}">–ü—Ä–æ—Ñ–∏–ª—å</button>
              <button class="btn small ${picked ? "good":""}" data-pick="${escapeHtml(w.id)}">
                ${picked ? "‚úì –í—ã–±—Ä–∞–Ω" : "–ù–∞–Ω—è—Ç—å"}
              </button>
              <a class="btn small" href="#" data-contact="${escapeHtml(w.id)}">–°–≤—è–∑–∞—Ç—å—Å—è</a>
            </div>
          </div>
        </article>
      `;
    }).join("");

    renderStats(visible);

    // handlers
    root.querySelectorAll("[data-open]").forEach(btn=>{
      btn.addEventListener("click", ()=>{
        const id = btn.getAttribute("data-open");
        openModal(id);
      });
    });
    root.querySelectorAll("[data-pick]").forEach(btn=>{
      btn.addEventListener("click", ()=>{
        const id = btn.getAttribute("data-pick");
        togglePick(id);
      });
    });
    root.querySelectorAll("[data-contact]").forEach(a=>{
      a.addEventListener("click", (e)=>{
        e.preventDefault();
        const id = a.getAttribute("data-contact");
        const w = getAllWorkers().find(x=>x.id===id);
        if(w) toast("–ö–æ–Ω—Ç–∞–∫—Ç—ã", `–¢–µ–ª–µ—Ñ–æ–Ω: ${w.phone} ‚Ä¢ Telegram/WhatsApp: –∫–Ω–æ–ø–∫–∏ –≤ –ø—Ä–æ—Ñ–∏–ª–µ`);
        openModal(id);
      });
    });
  }

  function renderSalary(){
    const body = $("#salaryBody");
    const rows = getAllWorkers().map(w=>({ ...w, totalPay: w.jobsDone * w.payPerJob }));

    if(state.salarySort === "jobs_asc"){
      rows.sort((a,b)=> a.jobsDone - b.jobsDone || a.totalPay - b.totalPay);
    } else if(state.salarySort === "jobs_desc"){
      rows.sort((a,b)=> b.jobsDone - a.jobsDone || b.totalPay - a.totalPay);
    } else {
      rows.sort((a,b)=> b.totalPay - a.totalPay || b.jobsDone - a.jobsDone);
    }

    body.innerHTML = rows.map(w=>`
      <tr>
        <td><b>${escapeHtml(w.name)}</b></td>
        <td>${escapeHtml(w.profession)}</td>
        <td class="money">${fmtMoney(w.payPerJob)}</td>
        <td><b>${w.jobsDone}</b></td>
        <td class="money">${fmtMoney(w.totalPay)}</td>
        <td>${escapeHtml(stars(w.rating))} <b>${w.rating.toFixed(1)}</b></td>
      </tr>
    `).join("");
  }

  function renderCatalog(){
    renderWorkers();
    renderSalary();
  }

  // events filters
  $("#q").addEventListener("input", (e)=>{ state.q = e.target.value; renderCatalog(); });
  $("#profession").addEventListener("change", (e)=>{
    state.profession = e.target.value;
    $$(".chip").forEach(c=>c.classList.toggle("active", c.dataset.chip === state.profession));
    renderCatalog();
  });
  $("#sort").addEventListener("change", (e)=>{ state.sort = e.target.value; renderCatalog(); });

  $("#resetFilters").addEventListener("click", ()=>{
    state.q = ""; state.profession="all"; state.sort="rating_desc";
    $("#q").value=""; $("#profession").value="all"; $("#sort").value="rating_desc";
    $$(".chip").forEach(c=>c.classList.toggle("active", c.dataset.chip === "all"));
    toast("–°–±—Ä–æ—Å", "–§–∏–ª—å—Ç—Ä—ã —Å–±—Ä–æ—à–µ–Ω—ã.");
    renderCatalog();
  });

  $("#toggleSalarySort").addEventListener("click", ()=>{
    if(state.salarySort === "jobs_asc"){
      state.salarySort = "jobs_desc";
      $("#toggleSalarySort").textContent = "–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞: –ø–æ —Ä–∞–±–æ—Ç–∞–º ‚Üì";
    } else if(state.salarySort === "jobs_desc"){
      state.salarySort = "total_desc";
      $("#toggleSalarySort").textContent = "–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞: –ø–æ –≤—ã–ø–ª–∞—Ç–µ (–º–∞–∫—Å.)";
    } else {
      state.salarySort = "jobs_asc";
      $("#toggleSalarySort").textContent = "–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞: –ø–æ —Ä–∞–±–æ—Ç–∞–º ‚Üë";
    }
    renderSalary();
  });

  // ========= REGISTRATION =========
  function nextId(){
    return "r" + Math.random().toString(16).slice(2) + Date.now().toString(16);
  }

  $("#fillRegDemo").addEventListener("click", ()=>{
    $("#rName").value = "–ê—Ä—Ç—ë–º –ù.";
    $("#rCity").value = "–ú–æ—Å–∫–≤–∞";
    $("#rProf").value = "–†–∞–∑–Ω–æ—Ä–∞–±–æ—á–∏–π";
    $("#rExp").value = "2 –≥–æ–¥–∞";
    $("#rPay").value = 3500;
    $("#rJobs").value = 3;
    $("#rPhone").value = "+7 999 111-22-33";
    $("#rTg").value = "https://t.me/username";
    $("#rWa").value = "https://wa.me/79991112233";
    $("#rAbout").value = "–ü–æ–¥—Å–æ–±–Ω—ã–µ —Ä–∞–±–æ—Ç—ã, –¥–µ–º–æ–Ω—Ç–∞–∂, —É–±–æ—Ä–∫–∞, –ø–µ—Ä–µ–Ω–æ—Å –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤. –ì–æ—Ç–æ–≤ –Ω–∞ —Å—Ä–æ—á–Ω—ã–µ –≤—ã–µ–∑–¥—ã.";
    toast("–ì–æ—Ç–æ–≤–æ", "–ü—Ä–∏–º–µ—Ä –∑–∞–ø–æ–ª–Ω–µ–Ω.");
  });

  $("#regForm").addEventListener("submit", (e)=>{
    e.preventDefault();

    const name = $("#rName").value.trim();
    const city = $("#rCity").value.trim();
    const profession = $("#rProf").value;
    const exp = $("#rExp").value;
    const payPerJob = Number($("#rPay").value);
    const jobsDone = Number($("#rJobs").value);
    const phone = $("#rPhone").value.trim();
    const tg = $("#rTg").value.trim();
    const wa = $("#rWa").value.trim();
    const about = $("#rAbout").value.trim();
    const photoPick = (document.querySelector('input[name="photoPick"]:checked')?.value) || "p1";

    if(!name || !city || !profession || !exp || !phone || !tg || !wa || !about || !Number.isFinite(payPerJob) || !Number.isFinite(jobsDone)){
      toast("–û—à–∏–±–∫–∞", "–ó–∞–ø–æ–ª–Ω–∏ –≤—Å–µ –ø–æ–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.");
      return;
    }

    // –ë–∞–∑–æ–≤—ã–π —Ä–µ–π—Ç–∏–Ω–≥ –¥–ª—è –Ω–æ–≤–æ–≥–æ —Ä–∞–±–æ—Ç–Ω–∏–∫–∞ (–¥–µ–º–æ)
    const rating = 4.5;

    const newWorker = {
      id: nextId(),
      name, profession, city,
      rating,
      jobsDone: Math.max(0, Math.floor(jobsDone)),
      payPerJob: Math.max(0, Math.floor(payPerJob)),
      exp,
      about,
      bullets: ["–ì–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ", "–°–≤—è–∑—å –¥–æ—Å—Ç—É–ø–Ω–∞", "–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥"],
      photo: photos[photoPick] || photos.p1,
      phone, tg, wa
    };

    const reg = loadRegistered();
    reg.unshift(newWorker);
    saveRegistered(reg);

    toast("–£—Å–ø–µ—à–Ω–æ!", "–†–∞–±–æ—Ç–Ω–∏–∫ –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∫–∞—Ç–∞–ª–æ–≥.");
    $("#regForm").reset();

    // –ø–µ—Ä–µ–π—Ç–∏ –≤ –∫–∞—Ç–∞–ª–æ–≥ –∏ –ø–æ–∫–∞–∑–∞—Ç—å
    showPage("catalog");
    renderCatalog();
  });

  // ========= CONTACTS =========
  function renderContacts(){
    $("#cEmail").textContent = contacts.email;
    $("#cPhone").textContent = "+7 (999) 000-00-00";
    $("#cTg").textContent = "@stroypoisk";
    $("#cWa").textContent = "+7 (999) 000-00-00";

    $("#mailLink").href = `mailto:${contacts.email}`;
    $("#telLink").href = `tel:${contacts.phone}`;
    $("#tgLink").href = contacts.tg;
    $("#waLink").href = contacts.wa;
  }

  // ========= MODAL =========
  let currentModalId = null;

  function openModal(id){
    const w = getAllWorkers().find(x=>x.id===id);
    if(!w) return;
    currentModalId = id;

    $("#modalPhoto").style.backgroundImage = `url('${w.photo}')`;
    $("#modalName").textContent = w.name;
    $("#modalSub").textContent = `${w.profession} ‚Ä¢ ${w.city} ‚Ä¢ –æ–ø—ã—Ç ${w.exp} ‚Ä¢ —Ä–µ–π—Ç–∏–Ω–≥ ${w.rating.toFixed(1)}`;
    $("#modalAbout").textContent = w.about;

    $("#modalKpis").innerHTML = `
      <span class="kpi">‚úÖ —Ä–∞–±–æ—Ç: <b>${w.jobsDone}</b></span>
      <span class="kpi">üí∞ –∑–∞ —Ä–∞–±–æ—Ç—É: <b>${fmtMoney(w.payPerJob)}</b></span>
      <span class="kpi">üßæ –≤—Å–µ–≥–æ: <b>${fmtMoney(w.jobsDone*w.payPerJob)}</b></span>
    `;
    $("#modalBullets").innerHTML = (w.bullets || []).map(x=>`<li>${escapeHtml(x)}</li>`).join("");

    $("#callBtn").href = `tel:${w.phone}`;
    $("#tgBtn").href = w.tg;
    $("#waBtn").href = w.wa;

    $("#hireBtn").textContent = state.picked.has(w.id) ? "‚úì –£–∂–µ –≤—ã–±—Ä–∞–Ω" : "–ù–∞–Ω—è—Ç—å";
    $("#hireBtn").classList.toggle("good", state.picked.has(w.id));
    $("#hireBtn").classList.toggle("primary", !state.picked.has(w.id));

    const back = $("#modalBackdrop");
    const modal = $("#modal");
    back.style.display = "flex";
    requestAnimationFrame(()=> modal.classList.add("show"));
    back.setAttribute("aria-hidden","false");
  }

  function closeModal(){
    const back = $("#modalBackdrop");
    const modal = $("#modal");
    modal.classList.remove("show");
    setTimeout(()=>{
      back.style.display = "none";
      back.setAttribute("aria-hidden","true");
      currentModalId = null;
    }, 140);
  }

  $("#modalBackdrop").addEventListener("click", (e)=>{
    if(e.target.id === "modalBackdrop") closeModal();
  });
  $("#closeModal").addEventListener("click", closeModal);
  document.addEventListener("keydown", (e)=>{ if(e.key==="Escape") closeModal(); });

  $("#hireBtn").addEventListener("click", ()=>{
    if(!currentModalId) return;
    togglePick(currentModalId);
    const w = getAllWorkers().find(x=>x.id===currentModalId);
    if(w){
      $("#hireBtn").textContent = state.picked.has(w.id) ? "‚úì –£–∂–µ –≤—ã–±—Ä–∞–Ω" : "–ù–∞–Ω—è—Ç—å";
      $("#hireBtn").classList.toggle("good", state.picked.has(w.id));
      $("#hireBtn").classList.toggle("primary", !state.picked.has(w.id));
    }
  });

  $("#reportBtn").addEventListener("click", ()=>{
    toast("–ñ–∞–ª–æ–±–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ (–¥–µ–º–æ)", "–ú—ã –ø—Ä–æ–≤–µ—Ä–∏–º –ø—Ä–æ—Ñ–∏–ª—å. –°–ø–∞—Å–∏–±–æ –∑–∞ —Å–∏–≥–Ω–∞–ª.");
  });

  // ========= –î–û–ü –ö–ù–û–ü–ö–ò =========
  $("#clearRegistered").addEventListener("click", ()=>{
    clearRegistered();
    toast("–ì–æ—Ç–æ–≤–æ", "–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–∞–±–æ—Ç–Ω–∏–∫–∏ —É–¥–∞–ª–µ–Ω—ã.");
    renderCatalog();
  });

  $("#resetAll").addEventListener("click", ()=>{
    clearRegistered();
    state.picked.clear();
    toast("–°–±—Ä–æ—Å", "–î–µ–º–æ-–¥–∞–Ω–Ω—ã–µ —Å–±—Ä–æ—à–µ–Ω—ã.");
    $("#q").value = "";
    $("#profession").value = "all";
    $("#sort").value = "rating_desc";
    state.q=""; state.profession="all"; state.sort="rating_desc";
    $$(".chip").forEach(c=>c.classList.toggle("active", c.dataset.chip === "all"));
    $("#toggleSalarySort").textContent = "–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞: –ø–æ —Ä–∞–±–æ—Ç–∞–º ‚Üë";
    state.salarySort = "jobs_asc";
    $("#countWorkers").textContent = String(getAllWorkers().length);
    renderCatalog();
    showPage("home");
  });

  // ========= INIT =========
  initSelects();
  initChips();
  $("#countWorkers").textContent = String(getAllWorkers().length);
  renderContacts();
  showPage("home");
</script>
</body>
</html>
